/*
 * Authors: Brent Montgomery, Christian DeSilva, Hannah Ford, Sarah DiStefano
 * Team Member Working: Chris DeSilva 
 * Date: 11/25/2019
 * Program: Booking class
 * Description: Booking Class Works with Hotel App & Classes: Employee, Room, Guest, 
 *  and Value Guest 
*/
import java.util.*;
package Project;

public class Booking {
    public Room bookedRoom = new Room(); 
    public Guest bookedGuest = new Guest();
    public int bookingYear;
    public int checkInDay;
    public int checkOutDay;
    public boolean isBooked;
    public static int nextID=0;
    ArrayList<RoomService> roomServiceArray;
    public Booking(Guest bookedGuest,Room bookedRoom, int bookingYear,int checkInDay, int checkOutDay){
   this.bookedGuest=bookedGuest;
   this.bookedRoom=bookedRoom;
   this.bookingYear=bookingYear;
   this.checkInDay=checkInDay;
   this.checkOutDay=checkOutDay;
   nextID++;
   this.isBooked=true;
   this.bookedRoom.roomBooked=this.isBooked;
   this.bookedRoom.incrementBookedCount();
   this.bookedRoom.incrementBookedDays(checkOutDay-checkInDay);
   this.roomServiceArray = new ArrayList<>();
   }
public void endBooking(){
   this.bookedRoom.freeThisRoom();
   this.isBooked=false;
}
public int getRoomServicePrice()
{
    int price=0;
    for(int i=0; i<roomServiceArray.size();i++){
        price+=roomServiceArray.get(i).getPrice();
        
    }
    return price;
}
public String getBookingDB()
    {
        String sqlQuery = "INSERT INTO JAVAUSER.BOOKING (BOOKEDROOM, BOOKEDGUEST, BOOKINGYEAR, CHECKINDAY, CHECKOUTDAY, ISBOOKED) VALUES ";
        sqlQuery+= "(" + this.bookedRoom + ",";
        sqlQuery+= "\'" + this.bookedGuest + "\',";
        sqlQuery+= "\'" + this.bookingYear + "\',";
        sqlQuery+= "\'" + this.checkInDay + "\',";
        sqlQuery+= "\'" + this.checkOutDay + "\',";
        sqlQuery+= "\'" + this.isBooked + "\')";
        
        return sqlQuery;
    }

}
